# Project
Проект реализованный в рамках ТТПО

# Описание проекта
Проект представляет собой программу для распознавания лиц с использованием камеры. Задачи программы включают постоянное наблюдение через камеру, определение наличия человека в кадре, распознавание лица и его отнесение к известным или новым кластерам.

# Функциональные требования
*1. Программа распознавания лица.
**1) Программа осуществляет постоянное наблюдение через камеру.
**2) Программа определяет находится ли человек в кадре.
**3) При обнаружении человека программа распознает, видела ли она такого человека раньше. 
**4) Если программа видела такого человека, определяет его в соответствующий кластер. 
**5) Если программа не видела такого человека раньше - создает новый кластер.
**6) Если человек в кадре неизвестен (то есть процент сходства ниже порогового), она должна отнести его в особый кластер, в котором по мнению программы содержаться похожие на это фото люди.
**7) Существует база данных, где собраны все фотографии по месяцам.
**8) Программа должна делать фотографию, если человек находится в кадре.

*2. Обучение программы
**1) Для программы должен быть реализован бот в Telegram, с помощью которого систему можно обучать (повышать точность).
**2) В telegram-боте по нажатию кнопки "обучать" программа должна отправить карточку человека, имя которого неизвестно. Пользователь должен вписать имя человека, система должна его запомнить. 
**3) По нажатию кнопки "Улучшить точность" программа может отправить фото человека, имя которого она знает, для повышения точности и уточнения.
**4) Бот должен предлагать обучить его, если есть неизвестные фотографии.
**5) Раз в сутки бот должен отправлять отчет о замеченных людях.
**6) Если программа определила человека на фото, но сделала это неверно, она должна пересобрать кластеры.
**7) По нажатию кнопки "Прекратить обучение" Telergam-бот должен прекратить отправлять запросы.

*3. База данных
**1) База данных позволяет сохранять все фотографии.
**3) База данных позволяет читать сохраненные данные.

# Ограничения
*1. Бот для приложения разрабатывается на платформе telegram V.10.
*2. Приложение работает на компьютере с подключенной камерой.
*3. Интерфейс бота доступен на русском языке.
*4. Программа разрабатывается на языке Python V.3.10
*5. Считается, что программа справляется с задачей, если она верно определяет человека в кадре с настраиваемой вероятностью.
*6. Фотокарточка может быть связана сразу с несколькими кластерами.


# Архитектура проекта
Проект имеет высокоуровневую архитектуру, включающую взаимодействие различных подсистем:

Телеграм: интерфейс для работы с ботом.

Телеграм-сервер: обработка запросов обучения и передача уведомлений.

Телеграм-бот: передача уведомлений, обучение и уточнение фотографий.

Брокер сообщений: передача информации между ботом и модулями.

База данных: хранение фотографий, кластеров и отчетов.

Модуль нейросети: распознавание лиц и определение принадлежности к кластерам.

Модуль обработки изображений: обработка изображений и передача данных в базу.

Управляющий модуль: координация работы различных модулей.

Модуль переобучения нейросети: пересборка кластеров при неверном распознавании.

# Критерии аттестации
Для завершения и успешной аттестации проекта необходимо выполнение следующих критериев:

Получение уникального хэш-номера бота в Telegram V.10.

Загрузка программы на одноплатный компьютер и настройка.

Непрерывное анализирование видеопотока через камеру с оповещениями от бота.

Распознавание и отнесение людей к известным или новым кластерам.

Активное участие пользователя в обучении и повышении точности распознавания.

Отправка ежедневных отчетов о замеченных людях в кадре.

Отображение и сохранение фотографий людей в базе данных с возможностью просмотра.

# Вкратце по коду

1) Script.py - программа запуска проекта(получение фото с камеры, определение на фото человека, кластеризация), в котором реализуется 3 субпроцесса с файлов comb.py, neuralnetwork.py, сlassificator.py.
2) comb.py - программа для получения фото с камеры, реализумый через библиотеку cv2.
3) neuralnetwork.py - программа для анализа и обрезания фото на фотокарточки для дальнейшеё кластеризации.
4) сlassificator.py - нейронная сеть для классификации фотокарточек(пока не готово)

# Необходимые команды перед запуском проекта

pip install mtcnn

pip install tensorflow

pip install opencv-python

pip install dlib

# Дополнительные модели
dlib_face_recognition_resnet_model_v1.dat - модель для определения человека в кадре(проверяет есть ли человек в кадре, и, пока он не ушёл из кадра, программа не делает снимки)

shape_predictor_68_face_landmarks.dat - 68 точечная модель для определения лица человека
